## 30장 데이터베이스는 세부사항이다

아키텍처 관점에서 볼 때 데이터베이스는 엔티티가 아니다. 즉, 데이터베이스는 세부사항이라서 아키텍처의 구성요소 수준으로 끌어올릴 수 없다.

아키텍처 관점 에서 보면 이러한 유틸리티는 저수준의 세부사항(메커니즘)일 뿐이라서 아키텍처와는 관련이 없다.

### 관계형 데이터베이스

관계형 데이터베이스는 데이터를 저장하고 접근하는 데 탁월한 기술이었다.
하지만 관계형 데이터베이스의 기술이 얼마나 뛰어나든, 유용하든, 아니면 수학적으로 견고하든, 결국은 그저 기술일 뿐이다. 그리고 이는 관계형 데이터베이스가 세부사항임을 뜻한다.

### 데이터베이스 시스템은 왜 이렇게 널리 사용되는가?

한마디로 답하자면 ,바로 '디스크' 때문이다.

지난 반세기 동안 회전식 자기 디스크magnetic disk는 데이터 저장소의 중심에 있었다.

디스크 때문에 피해갈 수 없는 시간 지연이라는 점을 완화하기 위해 색인, 캐시, 쿼리 계획 최적화가 필요해졌다. 작업 중인 대상이 어떤 데이터인지 알 수 있어야 했기 때문에 데이터 접근 및 관리 시스템이 필요해졌다. 이런 시스템은 시간이 지나면서 파일 시스템 혹은 관계형 데이터베이스 관리 시스템RDMBS의 두 가지 유형으로 분리되었다.

파일 시스템은 문서document 기반이다. 일련은 문서를 이름을 기준으로 저장하거나 조회할 때는 잘 동작하지만, 내용을 기준으로 검색할 때는 그리 크게 도움되지 않는다.

데이터베이스 시스템은 내용 기반이다. 레코드가 서로 공유하는 일부 내용에 기반해서 다수의 레코드를 연관 짓는 데 매우 탁월하지만 정형화되지 않은 문서를 저장하고 검색하는 데는 대체로 부적합하다.

### 디스크가 없다면 어떻게 될까?

데이터가 데이터베이스나 파일 시스템에 있더라도, RAM으로 읽은 후에는 다루기 편리한 형태로 그 구조를 변경한다. 데이터를 파일이나 테이블 형태로 그대로 두는 경우는 거의 없다.

### 세부사항

데이터베이스는 그저 매커니즘에 불과하며, 디스크 표면과 RAM 사이에서 데이터를 이리저리 옮길 때 사용할 뿐이다. 데이터베이스는 데이터를 장기적으로 저장하는 공간에 지나지 않는다.

따라서 아키텍처 관점에서는 데이터가 어떤 형태인지는 신경 써서는 안된다. 디스크 자체가 존재한다는 사실조차도 인식해서는 안된다.

### 하지만 성능은?

데이터 저장소에서 데이터를 빠르게 넣고 뺄 수 있어야 하는 건 저수준의 관심사다. 성능은 시스템의 전반적인 아키텍처와는 아무런 관련이 없다.

### 개인적인 일화

데이터베이스를 사용해야 하는 입장에서는 마케팅 캠페인에 불과하다. 옛날 일화이지만 현재 시점에서 이 시절로 돌아간다면 RDBMS를 한쪽에 붙여서 쓰고 시스템의 중심부에는 랜덤 액세스 파일을 그대로 유지하는 식으로 타협했을 것이다.

### 결론

체계화된 데이터 구조와 데이터 모델은 아키텍처적으로 중요하다. 데이터는 중요하지만 데이터베이스는 세부사항이다.