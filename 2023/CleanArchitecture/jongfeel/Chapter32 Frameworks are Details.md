## 32장 프레임워크는 세부사항이다

프레임워크는 무료이고 강력하며 유용하다.
하지만 아무리 해도 프레임워크는 아키텍처가 될 수 없다.

### 프레임워크 제작자

프레임워크 제작자의 고상한 동기와 관계 없이, 이들은 풀어야 할 특별한 관심사를 염두에 두지 않는다.
프레임워크 제작자는 자신이 해결해야 할 문제나 동료, 친구의 문제를 해결하기 위해 프레임워크를 만든다. 모르는 사람의 문제를 해결하기 위해서가 아니다.
물론 프레임워크가 풀려는 문제와 꽤 많이 겹치긴 할 것이다. 겹치지 않는다면 프레임워크가 인기를 끌지 못했을 것이다.

### 혼인 관계의 비대칭성

프레임워크 제작자는 나를 위해 헌신하지 않지만, 프레임워크를 위해 헌신해야 한다.

이 점을 신중히 생각해 봐야 안다. 프레임워크를 사용할 경우 제작자가 제공하는 문서를 꼼꼼히 읽는다. 대개의 경우 프레임워크를 중심에 두고 아키텍처는 그 바깥을 감싸야 한다고 말한다. 하지만 프레임워크 제작자는 프레임워크에 공고하게 결합될 것을 강하게 역설한다.

프레임워크 제작자는 프레임워크에 대해 절대적인 제어권을 쥐고 있기 떄문에 강하게 결합되기를 바란다.

사실상 프레임워크 제작자는 프레임워크와 혼인하기를 요구하는 것이다. 프레임워크에 대해 장기간에 걸친 막대한 헌신을 요청하는 것이다. 그럼에도 프레임워크 제작자는 어떠한 경우에도 그에 상응하는 헌신을 하지는 않을 것이다. 이 혼인 관계는 일방적이다. 

### 위험 요인

- 프레임워크의 아키텍처는 그다지 깔끔하지 않은 경우가 많다. 의존성 규칙을 위반하는 경향이 있고 프레임워크 제작자의 코드를 상속할 것을 요구한다. 프레임워크가 한번 안으로 들어가버리면 다시는 원 밖으로 나오지 않을 것이다.
- 프레임워크는 초기 기능을 만드는 데는 도움이 될 것이지만, 제품이 완성되어 가면서 프레임워크가 제공하는 기능과 틀을 벗어나게 된다.
- 프레임워크는 도움이 되지 않는 방향으로 진화할 수도 있다. 도움이 되지 않는 기능에 대한 업데이트로 다른 일을 못할 수도 있다. 사용중인 기능이 사라질 수도 있고 반영하기 힘든 형태로 바뀔 수도 있다.
- 새롭고 더 나은 프레임워크는 끊임없이 등장한다

### 해결책

> 프레임워크와 결혼하지 말라!

프레임워크를 사용하되 거리를 두고 세부 사항으로 취급해야 한다.

업무 객체를 만들 때 상속을 요구하면 거절하라! 대신 플러그인을 두고 proxy 패턴을 사용하자

프레임워크가 핵심 코드 안으로 들어오지 못하게 해야 한다. 플러그인을 통해 의존성 규칙을 준수해야 한다.

### 이제 선언합니다

C++를 사용한다면 STL과 결혼해야 할 가능성이 높다. 자바 역시 표준 라이브러리와 결혼해야 한다.

이러한 관계는 정상이지만 선택적이어야 한다. 애플리케이션이 프레임워크와 결혼하고자 하면 남은 생애 동안 그 프레임워크와 항상 함께 해야 한다는 사실을 명심해야 한다.

### 결론

바로 결혼하려 들지 말고 서약에 앞서 잠시 연애를 할 수 있는 방법이 있는지 확인하라.
프레임워크를 가능한 한 오랫동안 아키텍처 경계 너머에 두면 젖소를 사지 않고도 우유를 얻을 수 있는 방법을 찾을 수 있다.

```
의견)
결혼을 하지 말고 연애를 해보라는 비유는 꽤 괜찮은 것 같다.
하지만 여기서 나온 예제처럼 spring boot 프레임워크는 연애를 하려고 시도하다 보면
결혼은 거부할 수 있겠지만 사실혼 관계인 동거를 할 가능성이 높아 보인다.
```